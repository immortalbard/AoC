def intcode(seti,opcode):

    code=seti[0][-2:]
    modes=[ x for x in seti[0][0:2]]
#    print(modes)
    
    for i in range(len(seti)-1):
#        print(seti[i],modes[i-1])
        if i!=0 and int(modes[0-i])==0:
            foo=opcode[seti[i]]
            seti[i]=foo
    
#    print(seti)
            
    if code in ['01','02','07','08']:
        if code=='01':
            opcode[seti[3]] = seti[1]+seti[2]
            
        elif code=='02':
            opcode[seti[3]]=seti[1]*seti[2]
            
        elif code=='07':
            if seti[1]<seti[2]:
                opcode[seti[3]]=1
            else:
                opcode[seti[3]]=0
            
        elif code=='08':
            if seti[1]==seti[2]:
                opcode[seti[3]]=1
            else:
                opcode[seti[3]]=0
            
        else:
            print('error')        
            '''
        elif code=='09':
            if seti[1]>seti[2]:
                opcode[seti[3]]=1
            else:
                opcode[seti[3]]=0
                '''


    
    if code in ['03','04']:
        if code=='03':
            opcode[seti[1]]=int(input('Please provide input:\n...'))

        if code=='04':
            return opcode[seti[1]]
    
    if code in ['05','06']:
        if code=='05':
            if seti[1]!=0:
                return seti[2]
            else:
                pass
        
        if code=='06':
            if seti[1]==0:
                return seti[2]
            else:
                pass
        

def TEST(opcode):
    i=0
    while i < len(opcode):
        #print(opcode[i])
        abcde=str('0'*(4-len(str(opcode[i])))+str(opcode[i]))
        if abcde[-2:]=='99':
            i=len(opcode)+1
        
        if abcde[-2:] in ['01','02','07','08']:
            seti=opcode[i:i+4]
            seti[0]=abcde
            intcode(seti,opcode)
            i+=4
        
        elif abcde[-2:] in ['03','04']:
            seti=opcode[i:i+2]
            seti[0]=abcde
            test = intcode(seti,opcode)
            if test != None:
                print(test)
            i+=2
            
        elif abcde[-2:] in ['05','06']:
            seti=opcode[i:i+3]
            seti[0]=abcde
            test = intcode(seti,opcode)
            if test != None:
                i=test

def get_opcode(filename):
    file = open(filename)

    opcode = file.read().split(',')

    file.close()

    for i in range(len(opcode)):
        opcode[i] = int(opcode[i])

    return(opcode)

def sentence(noun,verb):
    return 100*int(noun)+int(verb)


testcode=[3,225,1,225,6,6,1100,1,238,225,104,0,1101,61,45,225,102,94,66,224,101,-3854,224,224,4,224,102,8,223,223,1001,224,7,224,1,223,224,223,1101,31,30,225,1102,39,44,224,1001,224,-1716,224,4,224,102,8,223,223,1001,224,7,224,1,224,223,223,1101,92,41,225,101,90,40,224,1001,224,-120,224,4,224,102,8,223,223,1001,224,1,224,1,223,224,223,1101,51,78,224,101,-129,224,224,4,224,1002,223,8,223,1001,224,6,224,1,224,223,223,1,170,13,224,101,-140,224,224,4,224,102,8,223,223,1001,224,4,224,1,223,224,223,1101,14,58,225,1102,58,29,225,1102,68,70,225,1002,217,87,224,101,-783,224,224,4,224,102,8,223,223,101,2,224,224,1,224,223,223,1101,19,79,225,1001,135,42,224,1001,224,-56,224,4,224,102,8,223,223,1001,224,6,224,1,224,223,223,2,139,144,224,1001,224,-4060,224,4,224,102,8,223,223,101,1,224,224,1,223,224,223,1102,9,51,225,4,223,99,0,0,0,677,0,0,0,0,0,0,0,0,0,0,0,1105,0,99999,1105,227,247,1105,1,99999,1005,227,99999,1005,0,256,1105,1,99999,1106,227,99999,1106,0,265,1105,1,99999,1006,0,99999,1006,227,274,1105,1,99999,1105,1,280,1105,1,99999,1,225,225,225,1101,294,0,0,105,1,0,1105,1,99999,1106,0,300,1105,1,99999,1,225,225,225,1101,314,0,0,106,0,0,1105,1,99999,1008,677,226,224,102,2,223,223,1006,224,329,101,1,223,223,108,677,677,224,102,2,223,223,1005,224,344,101,1,223,223,107,677,677,224,1002,223,2,223,1005,224,359,101,1,223,223,1107,226,677,224,1002,223,2,223,1005,224,374,1001,223,1,223,1008,677,677,224,102,2,223,223,1006,224,389,1001,223,1,223,1007,677,677,224,1002,223,2,223,1006,224,404,1001,223,1,223,8,677,226,224,102,2,223,223,1005,224,419,1001,223,1,223,8,226,226,224,102,2,223,223,1006,224,434,101,1,223,223,1107,226,226,224,1002,223,2,223,1006,224,449,101,1,223,223,1107,677,226,224,102,2,223,223,1005,224,464,101,1,223,223,1108,226,226,224,102,2,223,223,1006,224,479,1001,223,1,223,7,677,677,224,1002,223,2,223,1006,224,494,101,1,223,223,7,677,226,224,102,2,223,223,1005,224,509,101,1,223,223,1108,226,677,224,1002,223,2,223,1006,224,524,101,1,223,223,8,226,677,224,1002,223,2,223,1005,224,539,101,1,223,223,1007,226,226,224,102,2,223,223,1006,224,554,1001,223,1,223,108,226,226,224,1002,223,2,223,1006,224,569,1001,223,1,223,1108,677,226,224,102,2,223,223,1005,224,584,101,1,223,223,108,226,677,224,102,2,223,223,1005,224,599,101,1,223,223,1007,226,677,224,102,2,223,223,1006,224,614,1001,223,1,223,1008,226,226,224,1002,223,2,223,1006,224,629,1001,223,1,223,107,226,226,224,1002,223,2,223,1006,224,644,101,1,223,223,7,226,677,224,102,2,223,223,1005,224,659,1001,223,1,223,107,677,226,224,102,2,223,223,1005,224,674,1001,223,1,223,4,223,99,226]

if __name__ == '__main__':
    opcode = [3,15,2,15,17,0,1101,2,3,16,4,5,4,0,99,30,40,50]
    hoptest1=[3,12,6,12,15,1,13,14,13,4,13,99,-1,0,1,9]
    hoptest2=[3,3,1105,-1,9,1101,0,0,12,4,12,99,1]
    opcode1=[1002,4,3,4,33]
    TEST(hoptest1)
#    print(testcode[225])
    '''seti=[3,4]
    print(str('0'*(5-len(str(seti[0])))+str(seti[0])))
    abcde=str('0'*(5-len(str(seti[0])))+str(seti[0]))
    print(abcde)'''

    